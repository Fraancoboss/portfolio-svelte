import{ab as _,ag as g,ak as h,ah as y,y as b,a7 as p,z as l,G as k,at as E,a8 as T,g as w,a2 as A,E as D,a3 as F,a4 as M,a5 as N,F as S,D as v,au as x,av as R,d as m,ad as O,aw as B,ax as C,h as I,O as U}from"./AQeiAKmB.js";class z{anchor;#s=new Map;#t=new Map;#e=new Map;#a=!0;constructor(s,t=!0){this.anchor=s,this.#a=t}#r=()=>{var s=_;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)g(e);else{var n=this.#e.get(t);n&&(this.#t.set(t,n.effect),this.#e.delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),e=n.effect)}for(const[i,r]of this.#s){if(this.#s.delete(i),i===s)break;const f=this.#e.get(r);f&&(h(f.effect),this.#e.delete(r))}for(const[i,r]of this.#t){if(i===t)continue;const f=()=>{if(Array.from(this.#s.values()).includes(i)){var o=document.createDocumentFragment();E(r,o),o.append(b()),this.#e.set(i,{effect:r,fragment:o})}else h(r);this.#t.delete(i)};this.#a||!e?y(r,f,!1):f()}}};#i=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,n]of this.#e)t.includes(e)||(h(n.effect),this.#e.delete(e))};ensure(s,t){var e=_,n=T();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(n){var i=document.createDocumentFragment(),r=b();i.append(r),this.#e.set(s,{effect:p(()=>t(r)),fragment:i})}else this.#t.set(s,p(()=>t(this.anchor)));if(this.#s.set(e,s),n){for(const[f,c]of this.#t)f===s?e.skipped_effects.delete(c):e.skipped_effects.add(c);for(const[f,c]of this.#e)f===s?e.skipped_effects.delete(c.effect):e.skipped_effects.add(c.effect);e.oncommit(this.#r),e.ondiscard(this.#i)}else l&&(this.anchor=k),this.#r()}}function H(a,s,t=!1){l&&A();var e=new z(a),n=t?D:0;function i(r,f){if(l){const o=F(a)===M;if(r===o){var c=N();S(c),e.anchor=c,v(!1),e.ensure(r,f),v(!0);return}}e.ensure(r,f)}w(()=>{var r=!1;s((f,c=!0)=>{r=!0,i(c,f)}),r||i(!1,null)},n)}let u=!1,d=Symbol();function L(a,s,t){const e=t[s]??={store:null,source:O(void 0),unsubscribe:m};if(e.store!==a&&!(d in t))if(e.unsubscribe(),e.store=a??null,a==null)e.source.v=void 0,e.unsubscribe=m;else{var n=!0;e.unsubscribe=B(a,i=>{n?e.source.v=i:U(e.source,i)}),n=!1}return a&&d in t?C(a):I(e.source)}function P(){const a={};function s(){x(()=>{for(var t in a)a[t].unsubscribe();R(a,d,{enumerable:!1,value:!0})})}return[a,s]}function Y(a){var s=u;try{return u=!1,[a(),u]}finally{u=s}}export{z as B,L as a,Y as c,H as i,P as s};
